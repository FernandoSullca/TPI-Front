<div class="container main-container bg-white">
    <div class="brand-box pt-2">
        <h2>MercadoJr</h2>
        <img src="/assets/image/logo.svg" alt="">
    </div>
    <div class="container-perfil p-4">

        <div *ngIf="!isLastQuestion">
            <div *ngFor="let pregunta of cuestionario.preguntas">
                <!-- Verifica el tipo de pregunta -->

                <!-- Pregunta de tipo checkbox -->
                <ng-container *ngIf="pregunta.TipoComponente=== 'CHECKBOX'">
                    <div class="container-perfil-Questions p-2">
                        <p>{{ pregunta.descripcion }}</p>
                    </div>
                    <p> Podés elegir más de una opción o ninguna</p>
                    <div *ngIf="isArray(pregunta.respuestas)">
                        <div *ngFor="let respuesta of pregunta.respuestas">
                            <input type="checkbox" id="{{ respuesta.nombre }}" name="{{ respuesta.nombre}}"
                                (change)="actualizarOpcionesSeleccionadas(pregunta.seccion.nombre,respuesta.nombre,respuesta.valor)">

                            <label for="{{ respuesta }}">{{ respuesta.nombre }}</label>
                        </div>
                    </div>


                </ng-container>
                <!-- 
                <ng-container *ngIf="pregunta.TipoComponente=== 'CHECKBOX'">
                    <div class="container-perfil-Questions p-2">
                        <p>{{ pregunta.descripcion }}</p>
                    </div>
                    <p> Podés elegir más de una opción o ninguna</p>
                    <div *ngIf="isArray(pregunta.respuestas)">
                        <div *ngFor="let respuesta of pregunta.respuestas">
                            <input type="checkbox" id="{{ respuesta.nombre }}" name="{{ respuesta.nombre}}"
                                [(ngModel)]="respuesta.seleccionada"
                                (change)="actualizarOpcionesSeleccionadas(pregunta.seccion.nombre,respuesta.nombre,respuesta.valor,respuesta.seleccionada)">

                            <label for="{{ respuesta }}">{{ respuesta.nombre }}</label>
                        </div>
                    </div>


                </ng-container> -->
                <!-- Pregunta de tipo radio -->
                <!-- <ng-container *ngIf="pregunta.TipoComponente === 'RADIO'">
                    <div class="container-perfil-Questions p-2">
                        <p>{{ pregunta.descripcion }}</p>
                    </div>
                    <p> elegir Solo una opción"</p>
                    <div *ngIf="isArray(pregunta.respuestas)">
                        <div *ngFor="let respuesta of pregunta.respuestas ">
                            <input type="radio" id="{{ respuesta.nombre }}" name="{{respuesta.nombre}}"
                                value="{{respuesta.valor}}" [(ngModel)]="opcionSeleccionada"
                                (change)="actualizarOpcionesSeleccionadas(pregunta.seccion.nombre,respuesta.nombre,respuesta.valor,respuesta.seleccionada)">
                            <label for="{{ respuesta.nombre}}">{{ respuesta.nombre }}</label>
                        </div>
                    </div>

                </ng-container> -->
                <!-- Pregunta de tipo radio -->
                <ng-container *ngIf="pregunta.TipoComponente === 'RADIO'">
                    <div class="container-perfil-Questions p-2">
                        <p>{{ pregunta.descripcion }}</p>
                    </div>
                    <p> elegir Solo una opción"</p>
                    <div *ngIf="isArray(pregunta.respuestas)">
                        <div *ngFor="let respuesta of pregunta.respuestas ">
                            <input type="radio" id="{{ respuesta.nombre }}" name="{{respuesta.nombre}}"
                                value="{{respuesta.valor}}" [(ngModel)]="opcionSeleccionada"
                                (change)="actualizarOpcionesSeleccionadas(pregunta.seccion.nombre,respuesta.nombre,respuesta.valor)">
                            <label for="{{ respuesta.nombre}}">{{ respuesta.nombre }}</label>
                        </div>
                    </div>
                </ng-container>

                <!-- Pregunta de tipo botones-unica-opcion -->
                <!-- 
                <ng-container *ngIf="pregunta.TipoComponente === 'boton'" style="text-align: center;">
                    <div class="container-perfil-Questions p-2">
                        <p>{{ pregunta.descripcion }}</p>
                    </div>
                    <p> Elije el nivel de conocimiento por cada instrumento</p>
                    <div *ngIf="isArraybnt(pregunta.respuestas)">
                        <div *ngFor="let respuesta of pregunta.respuestas">
                            <p>{{respuesta.instrumento }}</p>
                            <div class="row">
                                <div *ngFor="let opcion of respuesta.respuestas" class="col-auto">

                                    <button type="button" id="{{ opcion.nombre }}" name="{{ respuesta.instrumento }}"
                                        [class.selected]="esRespuestaSeleccionada(respuesta.instrumento, opcion.valor)"
                                        (click)="actualizarOpcionesSeleccionadasBotonInstrumento(pregunta.seccion.nombre, respuesta.instrumento, opcion.valor)">

                                        {{ opcion.nombre }}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                </ng-container> -->

                <ng-container *ngIf="pregunta.TipoComponente === 'BOTON'" style="text-align: center;">
                    <div class="container-perfil-Questions p-2">
                        <p>{{ pregunta.descripcion }}</p>
                    </div>
                    <p> Elije el nivel de conocimiento por cada instrumento</p>

                    <div *ngFor="let respuesta of pregunta.respuestas">
                        <div class="row">
                            <!-- Mostrar el instrumento solo una vez -->
                            <div *ngIf="esPrimero(respuesta)">
                                <p>{{ respuesta.instrumento }}</p>
                                <ng-container *ngIf="respuesta.instrumento;">
                                    <div class="row"> 
                                        <div *ngFor="let opcion of opcionesPorInstrumento(pregunta.respuestas,respuesta.instrumento)" class="col-auto">
                                            <!-- <p>{{ opcion.nombre }}</p> -->
                                            <!-- <p>{{ opcion.valor }}</p>
                                            <p>{{ opcion.orden }}</p> -->
                                         <button type="button" id="{{ opcion.nombre }}" name="{{ respuesta.instrumento }}"
                                            [class.selected]="esRespuestaSeleccionada(respuesta.instrumento, opcion.valor)"
                                            (click)="actualizarOpcionesSeleccionadasBotonInstrumento(pregunta.seccion.nombre, respuesta.instrumento, opcion.valor)">
                                        {{ opcion.nombre }}
                                    </button>
                                        </div>
                                    </div> 
                                </ng-container>
                            </div>
                        </div>
                    </div>


                    <!-- <div *ngIf="isArraybnt(pregunta.respuestas)"> -->



                    <!-- <div *ngFor="let respuesta of pregunta.respuestas">
                        <p>{{respuesta.instrumento }}</p>
                        <div class="row"> -->
                    <!-- <div *ngFor="let opcion of respuesta.respuestas" class="col-auto"> -->

                    <!-- <button type="button" id="{{ opcion.nombre }}" name="{{ respuesta.instrumento }}"
                                        [class.selected]="esRespuestaSeleccionada(respuesta.instrumento, opcion.valor)"
                                        (click)="actualizarOpcionesSeleccionadasBotonInstrumento(pregunta.seccion.nombre, respuesta.instrumento, opcion.valor)">

                                        {{ opcion.nombre }}
                                    </button> -->
                    <!-- </div> -->
                    <!-- </div>
                    </div> -->
                    <!-- </div> -->

                </ng-container>

                <!-- Botón Siguiente Pregunta aquí -->

                <div class="justify-content-md-end" style="text-align: center;">
                    <button class="btn btn-primary btn btn-primary me-md-2" *ngIf="!isLastQuestion"
                        (click)="loadNextQuestion()">{{ buttonText }}</button>
                    <!-- <p *ngIf="isLastQuestion">¡Has respondido todas las preguntas!</p> -->
                </div>

            </div>
        </div>
        <div *ngIf="isLastQuestion" style="text-align: center;">
            <button class="btn btn-primary btn btn-primary me-md-2" (click)=" loadResultado()">{{ buttonText }}</button>
            <p *ngIf="isLastQuestion">¡Has respondido todas las preguntas!</p>
        </div>
    </div>

</div>