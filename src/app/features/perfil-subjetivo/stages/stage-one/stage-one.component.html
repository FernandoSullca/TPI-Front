<div class="container main-container bg-white">
    <div class="brand-box pt-2 alinearcion-logotipo">
        <h3><span class="bold-text-Marca">Mercado</span><span class="bold-Marca">JR</span></h3>
        <img src="/assets/image/logo.svg" alt="">
    </div>
    <div class="container-perfil p-4">

        <div *ngIf="!isLastQuestion">
            <div *ngFor="let pregunta of cuestionario.preguntas">
                <!-- Verifica el tipo de pregunta -->

                <!-- Pregunta de tipo checkbox -->
                <ng-container *ngIf="pregunta.TipoComponente=== 'CHECKBOX'">
                    <div class="container-perfil-Questions p-2 pb-0">
                        <p class="">{{ pregunta.descripcion }}</p>
                    </div>
                    <p class="alinea-descripcion-pregunta-check"> Podés elegir más de una opción o ninguna</p>
                    <div *ngIf="isArray(pregunta.respuestas)">
                        <div *ngFor="let respuesta of pregunta.respuestas" class="alinea-pregunta-check">
                            
                            <input type="checkbox" id="{{ respuesta.nombre }}" name="{{ respuesta.nombre}}"
                                (change)="actualizarOpcionesSeleccionadas(pregunta.seccion.nombre,respuesta.nombre,respuesta.valor)"
                                >

                            <label for="{{ respuesta }}">{{ respuesta.nombre }}</label>
                        </div>
                    </div>


                </ng-container>

                <!-- Pregunta de tipo radio -->
                <ng-container *ngIf="pregunta.TipoComponente === 'RADIO'">
                    <div class="container-perfil-Questions p-2 pb-0">
                        <p>{{ pregunta.descripcion }}</p>
                    </div>
                    <p class="alinea-descripcion-pregunta-radius">Elegir solo una opción</p>
                    <div *ngIf="isArray(pregunta.respuestas)" class="alinea-pregunta-radius">
                        <div *ngFor="let respuesta of pregunta.respuestas " class="alineacion-botones-opciones-radius" >
                              <!-- <label for="{{ respuesta.nombre}}">{{ respuesta.nombre }}</label> -->
                              <input type="radio" id="{{ respuesta.nombre }}" name="{{respuesta.nombre}}"
                                value="{{respuesta.valor}}" [(ngModel)]="opcionSeleccionada"
                                (change)="actualizarOpcionesSeleccionadas(pregunta.seccion.nombre,respuesta.nombre,respuesta.valor)">
                             <label for="{{ respuesta.nombre}}">{{ respuesta.nombre }}</label>
                        </div>
                    </div>
                </ng-container>

                <!-- Pregunta de tipo botones-unica-opcion -->
                <ng-container *ngIf="pregunta.TipoComponente === 'BOTON'" style="text-align: center;">
                    <div class="container-perfil-Questions p-2 pb-0">
                        <p>{{ pregunta.descripcion }}</p>
                    </div>
                    <p class="alinea-descripcion-pregunta-boton"> Elije el nivel de conocimiento por cada instrumento</p>

                    <div *ngFor="let respuesta of pregunta.respuestas" class="alinea-pregunta-boton">
                        <div class="row">
                            <!-- Mostrar el instrumento solo una vez -->
                            <div *ngIf="esPrimero(respuesta)">
                                <p class="pb-0 mb-1 nombre-instrumento-boton">{{ respuesta.instrumento }}</p>
                                <ng-container *ngIf="respuesta.instrumento;" >
                                    <div class="row"> 
                                        <div *ngFor="let opcion of opcionesPorInstrumento(pregunta.respuestas,respuesta.instrumento)" class="col-auto">
                                         <button class="botonera-lg-opciones" type="button" id="{{ opcion.nombre }}" name="{{ respuesta.instrumento }}"
                                            [class.selected]="esRespuestaSeleccionada(respuesta.instrumento, opcion.valor)"
                                            (click)="actualizarOpcionesSeleccionadasBotonInstrumento(pregunta.seccion.nombre, respuesta.instrumento, opcion.valor)">
                                        {{ opcion.nombre }}
                                    </button>
                                        </div>
                                    </div> 
                                </ng-container>
                            </div>
                        </div>
                    </div>


                    <!-- <div *ngIf="isArraybnt(pregunta.respuestas)"> -->



                    <!-- <div *ngFor="let respuesta of pregunta.respuestas">
                        <p>{{respuesta.instrumento }}</p>
                        <div class="row"> -->
                    <!-- <div *ngFor="let opcion of respuesta.respuestas" class="col-auto"> -->

                    <!-- <button type="button" id="{{ opcion.nombre }}" name="{{ respuesta.instrumento }}"
                                        [class.selected]="esRespuestaSeleccionada(respuesta.instrumento, opcion.valor)"
                                        (click)="actualizarOpcionesSeleccionadasBotonInstrumento(pregunta.seccion.nombre, respuesta.instrumento, opcion.valor)">

                                        {{ opcion.nombre }}
                                    </button> -->
                    <!-- </div> -->
                    <!-- </div>
                    </div> -->
                    <!-- </div> -->

                </ng-container>

                <!-- Botón Siguiente Pregunta aquí -->

                <div class="justify-content-md-end container-botonera-lg " >
                    <button class="btn btn-primary btn btn-primary me-md-2 botonera-lg" *ngIf="!isLastQuestion"
                        (click)="loadNextQuestion()">{{ buttonText }}<svg width="32" height="24" viewBox="0 0 32 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M22.0597 12H9.08354M22.0597 12L16.8693 16M22.0597 12L16.8693 8M27.2502 12C27.2502 16.9706 22.0215 21 15.5716 21C9.12174 21 3.89307 16.9706 3.89307 12C3.89307 7.02944 9.12174 3 15.5716 3C22.0215 3 27.2502 7.02944 27.2502 12Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg></button>
                    <!-- <p *ngIf="isLastQuestion">¡Has respondido todas las preguntas!</p> -->
                </div>

            </div>
        </div>
        <div *ngIf="isLastQuestion" class="finalizacion-area">
            <button class="btn btn-primary btn btn-primary me-md-2 botonera-lg" (click)=" loadResultado()">{{ buttonText }}</button>
            <p *ngIf="isLastQuestion" style="margin-top: 1.5rem;">¡Has respondido todas las preguntas!</p>
            <p *ngIf="isLastQuestion" style="margin-top: 1.5rem;">¡{{respuestasPerfil.perfilInversor}}!</p>
        </div>
    </div>

</div>